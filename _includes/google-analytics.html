<script async src="https://www.googletagmanager.com/gtag/js?id=UA-111010903-1"></script>
<script>
  if (isDebugMode()) {
    console.log('Google Analytics configuration ignored');
  } else {
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-111010903-1');
  }

  function isDebugMode() {
    if(!/github\.io/.test(window.location.hostname)) {
      console.log('Entering debug mode because of hostname.');
      return true;
    }

    if (isLocalStorageSupported() && localStorage.getItem('debugMode') === 'true') {
      console.log('Entering debug mode because of `debugMode` localStorage item.');
      return true;
    }

    return false;
  }

  // From https://github.com/Modernizr/Modernizr/blob/master/feature-detects/storage/localstorage.js#L40
  function isLocalStorageSupported() {
    var mod = 'modernizr';
    try {
        localStorage.setItem(mod, mod);
        localStorage.removeItem(mod);
        return true;
    } catch(e) {
        return false;
    }
  }
</script>
